
# Tutorial

首先提前把所有操作跑一遍，将每个操作1拆成一堆操作2。不难证明拆完后操作数的数量级不变。

对操作分块，不妨设每块大小为$S$。

不难证明与每块相关的边与其相连的连通块数量都是$O(S)$级别的。

在每块操作开始前，记与当前块相关的边集为$E_1$，不相关的为$E_2$。

将$E_2$中所有边加入并查集后

维护一个可撤回并查集用于回答操作3与操作4。


